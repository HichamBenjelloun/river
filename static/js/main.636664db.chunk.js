(this.webpackJsonpriver=this.webpackJsonpriver||[]).push([[0],{66:function(e,t,n){e.exports=n(79)},71:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(11),o=n.n(r),s=(n(71),n(7)),l=n(6),c=n(12),u=n(13),h=n(14),d=n(52),f=n.n(d),v=n(53),m=n.n(v),y=n(34),E=n.n(y),O=E()({SERVER_ACTION:null,VIEW_ACTION:null}),g=new(function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleServerAction",value:function(e){this.dispatch({source:O.SERVER_ACTION,action:e})}},{key:"handleViewAction",value:function(e){this.dispatch({source:O.VIEW_ACTION,action:e})}}]),t}(m.a.Dispatcher)),_=function(){function e(t){Object(s.a)(this,e),this._source=t,this._emitter=new f.a,this.handle?this._dispatchToken=g.register(this.handle.bind(this)):console.error("(MethodNotImplemented) Class "+this.constructor.name+"does not implement method `handle()` and can't handle actions.")}return Object(l.a)(e,[{key:"addChangeListener",value:function(t){this._emitter.on(e.CHANGE_EVENT,t)}},{key:"removeChangeListener",value:function(e){this._emitter.removeListener(e)}},{key:"emitChange",value:function(){this._emitter.emit(e.CHANGE_EVENT)}},{key:"source",get:function(){return this._source}}]),e}();_.CHANGE_EVENT="change";var b=function(e){function t(e,n){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._model=n,a._items=new Map,a._isLoading=!1,a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"requestData",value:function(){this.setIsLoading(!0),this.source.fetch()}},{key:"setIsLoading",value:function(e){this._isLoading=e}},{key:"isLoading",value:function(){return this._isLoading}},{key:"addItem",value:function(e){this._items.set(e.getValue("id"),e)}},{key:"getItem",value:function(e){return this._items.get(e)}},{key:"store",value:function(e){var t=!0,n=!1,a=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;this.addItem(new this._model(o))}}catch(s){n=!0,a=s}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}}},{key:"removeItem",value:function(e){this._items.delete(e)}},{key:"getAll",value:function(){return this._items}}]),t}(_),k=E()({TODO_RECEIVE_DATA:null,TODO_CREATE:null,TODO_DESTROY:null,TODO_TOGGLE:null}),p=function(){function e(t){Object(s.a)(this,e),this._values=t,this._fields={},this.setFields()}return Object(l.a)(e,[{key:"setField",value:function(e,t){this._fields[e]=t}},{key:"setFields",value:function(){if(this.fields)for(var e=this.fields(),t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];this.setField(a,e[a])}else console.error("(MethodNotImplemented) Class "+this.constructor.name+"should implement method `fields()`")}},{key:"setValue",value:function(e,t){this._values[e]=t,this.setFields()}},{key:"getValue",value:function(e){return this._values[e]}},{key:"hasErrors",value:function(){for(var e=0,t=Object.keys(this._fields);e<t.length;e++){var n=t[e];if(this._fields[n].hasErrors())return!0}return!1}},{key:"getErrors",value:function(){for(var e={},t=0,n=Object.keys(this._fields);t<n.length;t++){var a=n[t];this._fields[a].hasErrors()&&(e[a]=this._fields[a].getErrors())}return e}},{key:"values",get:function(){return this._values}}]),e}(),j=n(44),T=n.n(j),C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(s.a)(this,e),this._value=t,this._options=n,this._options[e.TYPE]=this.constructor.name,this._validators=a,this._validators[e.TYPE]=this.hasTypeError.bind(this),this._validators[e.REQUIRED]=this.hasRequiredError.bind(this),this.setValidators&&this.setValidators()}return Object(l.a)(e,[{key:"setValidator",value:function(e,t){this._validators[e]=t.bind(this)}},{key:"hasRequiredError",value:function(){return!!this._options[e.REQUIRED]&&(void 0===this.value||0==this.value.length)}},{key:"hasError",value:function(e){return!!this.hasTypeError()||(!this._options[e]||this._validators[e]())}},{key:"hasErrors",value:function(){for(var e=0,t=Object.keys(this._options);e<t.length;e++){var n=t[e];if(this.hasError(n))return!0}return!1}},{key:"getErrors",value:function(){for(var e=[],t=0,n=Object.keys(this._options);t<n.length;t++){var a=n[t];this._validators[a]()&&e.push(a)}return e}},{key:"value",get:function(){return this._value}},{key:"options",get:function(){return this._options}}]),e}();C.TYPE="type",C.REQUIRED="required";var w=C,D=function(e){function t(e,n){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e,n))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"setValidators",value:function(){this.setValidator(t.MAX_LENGTH,this.hasMaxLengthError)}},{key:"hasTypeError",value:function(){return!1}},{key:"hasMaxLengthError",value:function(){return this.value.length>this.options[t.MAX_LENGTH]}}]),t}(w);D.MAX_LENGTH="max_length";var A=D,V=function(e){function t(e,n){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e,n))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"hasTypeError",value:function(){return!T.a.isBoolean(this.value)}}]),t}(w),I=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"fields",value:function(){return{text:new A(this.values.text,{required:!0,max_length:50}),done:new V(this.values.done,{required:!0})}}}]),t}(p),x=function(e){g.handleServerAction({actionType:k.TODO_RECEIVE_DATA,data:e})},L=function(e){g.handleViewAction({actionType:k.TODO_CREATE,text:e})},R=function(e){g.handleViewAction({actionType:k.TODO_DESTROY,id:e})},N=function(e){g.handleViewAction({actionType:k.TODO_TOGGLE,id:e})},S=new(function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"data",value:function(){return[{id:Date.now(),text:"Sample todo",done:!0},{id:Date.now()+1,text:"Another sample",done:!1}]}},{key:"action",value:function(e){x(e)}},{key:"fetch",value:function(){this.action(this.data())}}]),t}((function e(){Object(s.a)(this,e)}))),G=k,M=new(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e,I)))._errors={},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handle",value:function(e){var t=e.action;switch(t.actionType){case G.TODO_RECEIVE_DATA:this.store(t.data),this.setIsLoading(!1),this.emitChange();break;case G.TODO_CREATE:this.create(t.text),this.emitChange();break;case G.TODO_DESTROY:this.destroy(t.id),this.emitChange();break;case G.TODO_TOGGLE:this.toggle(t.id),this.emitChange()}}},{key:"getErrors",value:function(){return this._errors}},{key:"setErrors",value:function(e){this._errors=e}},{key:"clearErrors",value:function(){this.setErrors({})}},{key:"create",value:function(e){var t=Date.now(),n=new I({id:t,text:e,done:!1});n.hasErrors()?this.setErrors(n.getErrors()):(this.addItem(n),this.clearErrors())}},{key:"destroy",value:function(e){this.removeItem(e)}},{key:"toggle",value:function(e){var t=this.getItem(e);t.setValue("done",!t.getValue("done"))}}]),t}(b))(S),q=n(112),H=n(128),F=n(116),P=n(118),W=n(129),Y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i))))._onToggleClick=function(){N(n.props.todo.getValue("id"))},n._onDestroyClick=function(){R(n.props.todo.getValue("id"))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.todo.getValue("done"),n=e.todo.getValue("text"),a={};return t&&(a={color:"grey"}),i.a.createElement(q.a,{dense:!0},i.a.createElement(F.a,null,i.a.createElement(W.a,{style:{cursor:"pointer"},edge:"start",onClick:this._onDestroyClick})),i.a.createElement(F.a,null,i.a.createElement(H.a,{edge:"start",checked:t,onChange:this._onToggleClick,tabIndex:-1,disableRipple:!0})),i.a.createElement(P.a,{primary:i.a.createElement("span",{style:a},n)}))}}]),t}(i.a.Component),B=n(120),U=n(119),J=function(e){var t=e.todos,n=Array.from(t.keys()).map((function(e){return console.log(e),i.a.createElement(a.Fragment,null,i.a.createElement(Y,{key:e,todo:t.get(e)}),i.a.createElement(U.a,null))}));return i.a.createElement(B.a,null,n)},K=n(127),Q=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e)))._handleChange=function(e){n.setState({value:e.target.value})},n._onCreateClick=function(){L(n.state.value),n.setState({value:""})},n._handleKeyPressed=function(e){13===e.keyCode&&n._onCreateClick()},n.state={value:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this._handleKeyPressed,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this._handleKeyPressed)}},{key:"render",value:function(){var e=this.state,t=M.getErrors();return t=0===Object.keys(t).length?null:JSON.stringify(t),i.a.createElement(K.a,{ref:"input",label:"Add todo...",variant:"outlined",value:e.value,onChange:this._handleChange,helperText:t})}}]),t}(i.a.Component),X=n(59),$=n(122),z=n(123),Z=n(124),ee=n(121),te=n(125),ne=n(117),ae=n(31),ie=n(58),re=n.n(ie),oe=n(126),se=Object(X.a)({palette:{primary:ee.a,secondary:ee.a}}),le=(Object($.a)((function(e){return{offset:e.mixins.toolbar}})),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={todos:M.getAll()},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){M.addChangeListener(this._onChange.bind(this)),M.requestData()}},{key:"componentWillUnmount",value:function(){M.removeChangeListener(this._onChange.bind(this))}},{key:"render",value:function(){var e={},t=this.state;console.log(t.todos);return i.a.createElement(z.a,{theme:se},i.a.createElement("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},i.a.createElement(Z.a,{position:"static"},i.a.createElement(te.a,null,i.a.createElement(oe.a,{color:"inherit",href:"https://github.com/HichamBenjelloun/river"},i.a.createElement(ne.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"github"},i.a.createElement(re.a,null))),i.a.createElement(ae.a,{variant:"h6",className:e.title},"Todo list demo"))),i.a.createElement("div",{style:{position:"relative",top:"100px",width:"90%",display:"flex",flexDirection:"column",justifyContent:"center"}},i.a.createElement(Q,null),i.a.createElement(J,{todos:t.todos}))))}},{key:"_onChange",value:function(){this.setState({todos:M.getAll()})}}]),t}(i.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[66,1,2]]]);
//# sourceMappingURL=main.636664db.chunk.js.map